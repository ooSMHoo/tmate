<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="host">
	<select id="getMemberEmail" resultType="String" parameterType="com.sp.trip.member.SessionInfo">
		SELECT memberEmail FROM member1 WHERE memberId = #{userId}
	</select>
	
	<insert id="insertHost" parameterType="com.sp.trip.host.Host">
		INSERT INTO memberHost(mhId, mhName, mhNum, mhPhone, mhAddr1, mhAddr2, mhZip, mhAc_name,
			bankNum, mhAc_num, mhEnabled, mhSign)
		VALUES (#{mhId}, #{mhName}, #{mhNum}, #{mhPhone}, #{mhAddr1}, #{mhAddr2}, #{mhZip}, #{mhAc_name}, 
			#{bankNum}, #{mhAc_num}, 0, 0)
	</insert>
	<select id="readHost" parameterType="String" resultType="com.sp.trip.host.Host">
		SELECT mhId, mhName, mhNum, mhPhone, mhAddr1, mhAddr2, mhZip, mhAc_name, bankNum, mhAc_num,
				mhEnabled, mhSign
		FROM memberHost
		WHERE mhId = #{userId}
	</select>
	
	<insert id="insertLodging" parameterType="com.sp.trip.host.Lodging">
		INSERT INTO lodging(mhId, lcNum, lodgName, lodgLat, lodgLon, lodgContent1, lodgContent2, lodgStart_date,
				lodgEnd_date, lodgPageAddr, lodgCin_time, lodgCout_time, lodgOption)
		VALUES (#{mhId}, #{lcNum}, #{lodgName}, #{lodgLat}, #{lodgLon}, #{lodgContent1}, #{lodgContent2},
				#{lodgStart_date}, #{lodgEnd_date}, #{lodgPageAddr, jdbcType=VARCHAR}, #{lodgCin_time},
				#{lodgCout_time}, #{lodgOption})
	</insert>
	
	<insert id="insertLodgingPhoto" parameterType="com.sp.trip.host.Lodging">
		INSERT INTO lodgingPhoto(lPhotoNum, lPhotoName, mhId)
		VALUES (lodgingPhoto_seq.NEXTVAL, #{lPhotoName}, #{mhId})
	</insert>
	<select id="readLodgingPhoto" parameterType="String" resultType="com.sp.trip.host.Lodging">
		SELECT lPhotoNum, lPhotoName, mhId
		FROM lodgingPhoto
		WHERE mhId = #{mhId};
	</select>
</mapper>
